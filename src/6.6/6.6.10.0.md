---
nav:
  title: v6.6.10.0
meta:
  date: 2025-01-15
---

# Release notes Shopware 6.6.10.0

## Abstract

This minor release contains 

## System requirements

* tested on PHP 8.2 and 8.3
* tested on MySQL 8 and MariaDB 10.11

## Improvements
### Upgrade to Symfony 7.2
* Changed `symfony/*` dependencies to `^7.2`

### Addition of MySQLInvalidatorStorage
* Introduced `\Shopware\Core\Framework\Adapter\Cache\InvalidatorStorage\MySQLInvalidatorStorage` to collect and handle cache invalidations in MySQL as an atomic operation.
* This new storage option allows delayed cache invalidation without requiring Redis (though Redis remains the recommended solution).
* To switch to MySQL for delayed cache invalidation, update your configuration as follows:
```yaml
shopware:
    cache:
        invalidation:
            delay: 1
            delay_options:
                storage: mysql
```

### [A11y-HTML] Offer HTML alternative to our pdf standard documents
* Added HTML alternative to our pdf standard documents
#### Core:

* Changed `Shopware\Core\Checkout\Document\Renderer\CreditNoteRenderer::render`
    * to `setTemplate` for `RenderedDocument`
    * to `setContext` for `RenderedDocument`
    * to `setOrder` for `RenderedDocument`
* Changed `Shopware\Core\Checkout\Document\Renderer\DeliveryNoteRenderer::render`
    * to `setTemplate` for `RenderedDocument`
    * to `setContext` for `RenderedDocument`
    * to `setOrder` for `RenderedDocument`
* Changed `Shopware\Core\Checkout\Document\Renderer\InvoiceRenderer::render`
    * to `setTemplate` for `RenderedDocument`
    * to `setContext` for `RenderedDocument`
    * to `setOrder` for `RenderedDocument`
* Changed `Shopware\Core\Checkout\Document\Renderer\StornoRenderer::render`
    * to `setTemplate` for `RenderedDocument`
    * to `setContext` for `RenderedDocument`
    * to `setOrder` for `RenderedDocument`
* Added parameters `template`, `context`, `order` in `Shopware\Core\Checkout\Document\Renderer\RenderedDocument`.
* Changed `Shopware\Core\Checkout\Document\SalesChannel\DocumentRoute::download` to implement authenticate for customer.
* Changed `Shopware\Core\Checkout\Document\Service\DocumentGenerator::readDocument` to load the media based on `fileType`.
* Changed `Shopware\Core\Checkout\Document\Service\DocumentGenerator::generate` to save `documentA11yMediaFileId` field.
* Changed `Shopware\Core\Checkout\Document\Service\DocumentGenerator::preview` to set the content based on `fileType`.
* Added `Shopware\Core\Checkout\Document\Service\DocumentFileRendererRegistry` to callable render by contentType.
* Added `Shopware\Core\Checkout\Document\Service\HtmlRenderer` to render the document file.
* Changed `Shopware\Core\Checkout\Document\Service\PdfRenderer` to use `documentTemplateRenderer` render the document.
* Changed `Shopware\Core\Checkout\Document\Controller\DocumentController::downloadDocument` to add the `fileType` configuration to the `DocumentGenerator`.
* Changed `src/Core/Framework/Resources/views/documents/base.html.twig` to implement accessibility for HTML documents.
* Added `Shopware\Core\Framework\Event\A11yRenderedDocumentAware` to provide the document ids to render the A11y document.
* Added `Shopware\Core\Content\Flow\Dispatching\Storer\A11yRenderedDocumentStorer` to store the document ids and documents to render the A11y documents.
* Changed `Shopware\Core\Checkout\Order\Event\OrderStateMachineStateChangeEvent` to implements `A11yRenderedDocumentAware`

#### Administration :

* Changed method `getDocumentPreview` in `document.api.service` service to add the `fileType` like <html or pdf> attributes.
* Changed `sw-order-document-card`.
  * `onPreview` method to add new `fileType` attribute.
  * `openDocument` method to add new `fileType` attribute.
  * `downloadDocument` method to add new `fileType` attribute.
  * `getDocumentColumns` computed to add new column `fileTypes`.
* Added method `availableFormatsFilter` in `sw-order-document-card` component to filter the available formats.
* Added block `sw_order_document_card_grid_column_avaiable_formats` in `sw-order-document-card.html.twig` to show the available formats column.
* Changed method `onPreview` in `sw-order-document-settings-modal` component to add new `fileType` attribute.
* Changed method `onPreview` in `sw-order-document-settings-credit-note-modal` component to add new `fileType` attribute.
* Changed method `onPreview` in `sw-order-document-settings-delivery-note-modal` component to add new `fileType` attribute.
* Changed method `onPreview` in `sw-order-document-settings-invoice-modal` component to add new `fileType` attribute.
* Added block `sw_order_document_settings_modal_form_document_footer_preview` in `sw-order-document-settings-modal.html.twig` to show the preview HTML button.
* Added method `loadTheLinksForA11y` in `sw-order-send-document-modal` component to load the HTML links for a11y.
* Changed method `onSendDocument` in `sw-order-send-document-modal` component to add `a11yDocuments` attribute for `mailService.sendMailTemplate`.
* Changed data `generalFormFields` in `sw-settings-document-detail` component to add `config` `fileTypes` to show formats like <pdf, html>.
* Added method `onRemoveDocumentType` in `sw-settings-document-detail` component to remove item with `sw-multi-select` component.
* Added method `onAddDocumentType` in `sw-settings-document-detail` component to add item with `sw-multi-select` component.
* Added block `sw_settings_document_detail_content_form_field_renderer_multi_select` in `sw-settings-document-detail.html.twig` to show the multi select component.

#### Storefront :

* Changed block `page_account_order_document_item_detail_file_name` in `src/Storefront/Resources/views/storefront/page/account/order-history/order-detail-document-item.html.twig` to add the link to render `html` document.

### Introduce global template data for language and navigation
* Added global template data for language and navigation

### Introduce Edge Side Includes for header and footer
* Added ESI for header and footer

### Bulk entity extension
* Deprecated EntityExtension::getDefinitionClass. It will be replaced by `EntityExtension::getEntityName`, which needs to return the entity name.

Before:

```php
<?php

namespace Examples\Extension;

use Shopware\Core\Content\Product\ProductDefinition;
use Shopware\Core\Framework\DataAbstractionLayer\EntityExtension;

class MyEntityExtension extends EntityExtension
{
    public function getDefinitionClass(): string
    { 
        return ProductDefinition::class;
    }
}
```

After:

```php
<?php

namespace Examples\Extension;

use Shopware\Core\Content\Product\ProductDefinition;
use Shopware\Core\Framework\DataAbstractionLayer\EntityExtension;

class MyEntityExtension extends EntityExtension
{
    public function getEntityName() : string
    {
        return ProductDefinition::ENTITY_NAME;
    }
}
```

### Using external URL for media's path without storing physical files
* You can now store media paths as external URLs using the admin API. This allows for more flexible media management without the need to store physical files on the server.

**Example Request:**

```http
POST http://sw.test/api/media
Content-Type: application/json

{
    "id": "01934e0015bd7174b35838bbb30dc927",
    "mediaFolderId": "01934ebfc0da735d841f38e8e54fda09",
    "path": "https://test.com/photo/2024/11/30/sunflowers.jpg",
    "fileName": "sunflower",
    "mimeType": "image/jpeg"
}
```

### Add aggregate admin api
* Added generic `/api/aggregate/{entityName}` API. It is similar to already existing `/api/search/${entityName}`, but without loading entities

## Fixed bugs

* [NEXT-39764](https://github.com/shopware/shopware/issues/5669) - Cloud Very long loading & crash from website with many promotion codes
* [NEXT-39718](https://github.com/shopware/shopware/issues/5629) - Restoring currency inheritance breaks advanced pricing
* [NEXT-39690](https://github.com/shopware/shopware/issues/5529) - A11y - OU: Lacking descriptive page titles
* [NEXT-39645](https://github.com/shopware/shopware/issues/5508) - A11y: Subscriptions - lacking descriptive page titles
* [NEXT-39643](https://github.com/shopware/shopware/issues/5506) - A11y: Employee Management - error handling on detail pages for VO
* [NEXT-39635](https://github.com/shopware/shopware/issues/5501) - A11y/Usability: Product slider - Missing slide controls (unlike Image Slider)
* [NEXT-39576](https://github.com/shopware/shopware/issues/5475) - A11y - OU: ARIA dialog and alert dialog nodes should have an accessible name
* [NEXT-39575](https://github.com/shopware/shopware/issues/5473) - A11y - OU: Heading levels should only increase by one
* [NEXT-39574](https://github.com/shopware/shopware/issues/5474) - A11y - OU: Table header text should not be empty
* [NEXT-39573](https://github.com/shopware/shopware/issues/5472) - A11y - OU: Buttons must have discernible text
* [NEXT-39571](https://github.com/shopware/shopware/issues/5471) - A11y - OU: Form elements must have labels
* [NEXT-39570](https://github.com/shopware/shopware/issues/5469) - A11y - OU: Links must have discernible text
* [NEXT-39568](https://github.com/shopware/shopware/issues/5470) - A11y - OU: Autocomplete attribute must be used correctly
* [NEXT-39567](https://github.com/shopware/shopware/issues/5468) - A11y - OU: Elements must only use supported ARIA attributes
* [NEXT-39546](https://github.com/shopware/shopware/issues/5465) - product.available set to "0" if is_closeout IS NULL instead of "0"

## Credits

* [null](https://github.com/null)
* [ROBJkE](https://github.com/ROBJkE)
* [Schrank](https://github.com/Schrank)
* [g-volker](https://github.com/g-volker)
* [amenk](https://github.com/amenk)
* [lacknere](https://github.com/lacknere)
* [akf-bw](https://github.com/akf-bw)
* [SpiGAndromeda](https://github.com/SpiGAndromeda)
* [aragon999](https://github.com/aragon999)
* [niklaswolf](https://github.com/niklaswolf)
* [patzick](https://github.com/patzick)
* [OliverSkroblin](https://github.com/OliverSkroblin)

Thanks to all diligent friends for helping us make Shopware better and better with each pull request!

## More resources

* [Detailed diff on Github](https://github.com/shopware/shopware/compare/v6.6.9.0...v6.6.10.0) to the former version
* [Changelog on GitHub](https://github.com/shopware/shopware/blob/v6.6.10.0/CHANGELOG.md) for this version
* [Release News on corporate blog](https://www.shopware.com/en/news/shopware-6-release-news-january-2025/)
* [Installation overview](https://developer.shopware.com/docs/guides/installation/)
* [Update from a previous installation](https://developer.shopware.com/docs/guides/installation/template.html#update-shopware)

## Get in touch

Discuss about decisions, bugs you might stumble upon, etc in our [community slack](https://shopwarecommunity.slack.com/). See you there ;)
