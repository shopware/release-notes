---
nav:
  title: v6.6.7.0
meta:
  date: "2024-09-23"
---

# Release notes Shopware 6.6.7.0

## Abstract

This minor release contains some interesting features as well as technical improvements like Accessibility improvements and OpenTelemetry enhancements.

## System requirements

* tested on PHP 8.2 and 8.3
* tested on MySQL 8 and MariaDB 10.11

## Improvements

### Account order accessibility
* Changed `order-wrapper` element from `<div>` to `<article>` in `Resources/views/storefront/page/account/order-history/order-item.html.twig`
* Changed `account-aside-list-group` element from `<div>` to `nav` in `Resources/views/storefront/page/account/sidebar.html.twig`
* Deprecated custom styling for `order-table-header-context-menu`. Bootstrap class `btn-light` will be used instead.
* Deprecated custom styling for `order-table-header-context-menu-content-link`. Bootstrap class `dropdown-item` will be used instead.
* Deprecated using `<div>` elements for list items and list wrappers in the following templates. Actual lists `<ul class="list-unstyled">` and `<li>` will be used instead:
    * `Resources/views/storefront/page/account/order-history/index.html.twig`
    * `Resources/views/storefront/page/account/order-history/order-detail-document-item.html.twig`
    * `Resources/views/storefront/page/account/order-history/order-detail-document.html.twig`
    * `Resources/views/storefront/page/account/order-history/order-detail-list.html.twig`
    * `Resources/views/storefront/page/account/order-history/order-detail-list.html.twig`
    * `Resources/views/storefront/page/checkout/cart/index.html.twig`
    * `Resources/views/storefront/page/checkout/confirm/index.html.twig`
    * `Resources/views/storefront/page/checkout/finish/index.html.twig`
    * `Resources/views/storefront/page/checkout/address/index.html.twig`
    * `Resources/views/storefront/component/checkout/offcanvas-cart.html.twig`
    * `Resources/views/storefront/component/line-item/type/product.html.twig`
    * `Resources/views/storefront/component/line-item/type/discount.html.twig`
    * `Resources/views/storefront/component/line-item/type/generic.html.twig`
    * `Resources/views/storefront/component/line-item/type/container.html.twig`

#### Upgrade information
We want to change several list views that are currently using generic `<div>` elements to proper `<ul>` and `<li>`. This will not only improve the semantics but also the screen reader accessibility.
To avoid breaking changes in the HTML and the styling, the change to `<ul>` and `<li>` is done behind the `ACCESSIBILITY_TWEAKS` feature flag.
With the next major version the `<ul>` and `<li>` will become the default. In the meantime, the `<div>` elements get `role="list"` and `role="listitem"`.
All `<ul>` will get a Bootstrap `list-unstyled` class to avoid the list bullet points and have the same appearance as `<div>`.
The general HTML structure and Twig blocks remain the same.

#### Affected templates:
* Account order overview
    * `src/Storefront/Resources/views/storefront/page/account/order-history/index.html.twig`
    * `src/Storefront/Resources/views/storefront/page/account/order-history/order-detail-document-item.html.twig`
    * `src/Storefront/Resources/views/storefront/page/account/order-history/order-detail-document.html.twig`
* Cart table header (Root element changed to `<li>`)
    * `src/Storefront/Resources/views/storefront/component/checkout/cart-header.html.twig`
* Line-items wrapper (List wrapper element changed to `<ul>`)
    * `src/Storefront/Resources/views/storefront/page/checkout/cart/index.html.twig`
    * `src/Storefront/Resources/views/storefront/page/checkout/confirm/index.html.twig`
    * `src/Storefront/Resources/views/storefront/page/checkout/finish/index.html.twig`
    * `src/Storefront/Resources/views/storefront/page/checkout/address/index.html.twig`
    * `src/Storefront/Resources/views/storefront/page/account/order-history/order-detail-list.html.twig`
    * `src/Storefront/Resources/views/storefront/component/checkout/offcanvas-cart.html.twig`
* Line-items (Root element changed to `<li>`)
    * `src/Storefront/Resources/views/storefront/component/line-item/type/product.html.twig`
    * `src/Storefront/Resources/views/storefront/component/line-item/type/discount.html.twig`
    * `src/Storefront/Resources/views/storefront/component/line-item/type/generic.html.twig`
    * `src/Storefront/Resources/views/storefront/component/line-item/type/container.html.twig`

#### Next Major Version Changes
To improve the accessibility and semantics, several generic `<div>` elements that are representing lists are changed to actual `<ul>` and `<li>` elements.
This effects the account order overview area as well as the cart line-item templates.

### Expanded notification message column to allow longer messages
* Changed field type of `message` column in `\Shopware\Administration\Notification\NotificationDefinition` to `LongText` to allow longer messages.
* Added `\Shopware\Administration\Migration\V6_6\Migration1726132532ExpandNotificationMessage` migration to update the column type from varchar to longtext.

### Added company and department to different views in B2B context
In Administration, we added company and department to different views to improve the B2B experience.
* Added customer company to `sw-customer-list`, `sw-order-list`, `sw-order-general-info`
* Added company and department to billing/shipping address `sw-order-list`, `sw-order-address-selection`

### OpenTelemetry: simplify emitting metrics
We simplified the metrics system in Core to make it easier to emit metrics.
* Removed `Shopware\Core\Framework\Telemetry\Metrics\MetricEventDispatcher`
* Removed the ability to configure Metrics via Attributes
* Added `Shopware\Core\Framework\Telemetry\Metrics\Config\MetricConfiguration` concept to configure metrics
* Added `Shopware\Core\Framework\Telemetry\Metrics\Factory\MetricTransportFactoryInterface` that enables configuring metric transports via `Shopware\Core\Framework\Telemetry\Metrics\Config\TransportConfig`
* Changed Metric types with ` Shopware\Core\Framework\Telemetry\Metrics\Metric\ConfiguredMetric` to simplify the emitting process
* Changed `Shopware\Core\Framework\Telemetry\Metrics\Metric\MetricInterface` with `Shopware\Core\Framework\Telemetry\Metrics\Metric`
* Added the ability to configure labels on metrics
* Added the ability to disable and enable metrics individually


## Fixed bugs

## Credits

Thanks to all diligent friends for helping us make Shopware better and better with each pull request!

## More resources

* [Detailed diff on Github](https://github.com/shopware/shopware/compare/v6.6.6.1...v6.6.7.0) to the former version
* [Changelog on GitHub](https://github.com/shopware/shopware/blob/v6.6.7.0/CHANGELOG.md) for this version.
* [Installation overview](https://developer.shopware.com/docs/guides/installation/)
* [Update from a previous installation](https://developer.shopware.com/docs/guides/installation/template.html#update-shopware)

## Get in touch

Discuss about decisions, bugs you might stumble upon, etc in our [community slack](https://shopwarecommunity.slack.com/). See you there ;)
